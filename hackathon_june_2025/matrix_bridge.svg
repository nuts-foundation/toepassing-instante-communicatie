<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="980px" preserveAspectRatio="none" style="width:1171px;height:980px;background:#FFFFFF;" version="1.1" viewBox="0 0 1171 980" width="1171px" zoomAndPan="magnify"><title>FHIR &#8594; Matrix Bridge integration</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="259.6152" x="452.0649" y="27.9951">FHIR &#8594; Matrix Bridge integration</text><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="19.9551" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="118.5938" y2="899.4453"/></g><g><title>FHIR Store</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="238.2061" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="242.1074" x2="242.1074" y1="118.5938" y2="899.4453"/></g><g><title>Matrix Bridge</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="482.1396" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="486.0571" x2="486.0571" y1="118.5938" y2="899.4453"/></g><g><title>Matrix Homeserver</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="774.3408" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="778.2461" x2="778.2461" y1="118.5938" y2="899.4453"/></g><g><title>Matrix Space</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="913.0313" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="916.4355" x2="916.4355" y1="118.5938" y2="899.4453"/></g><g><title>Matrix Room / Channel</title><rect fill="#000000" fill-opacity="0.00000" height="780.8516" width="8" x="1066.686" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1070.627" x2="1070.627" y1="118.5938" y2="899.4453"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="115.292">User</text><ellipse cx="23.9551" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,58.7969 L23.9551,85.7969 M10.9551,66.7969 L36.9551,66.7969 M23.9551,85.7969 L10.9551,100.7969 M23.9551,85.7969 L36.9551,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="911.4404">User</text><ellipse cx="23.9551" cy="923.2422" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,931.2422 L23.9551,958.2422 M10.9551,939.2422 L36.9551,939.2422 M23.9551,958.2422 L10.9551,973.2422 M23.9551,958.2422 L36.9551,973.2422" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Store"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88.1973" x="198.1074" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.1973" x="205.1074" y="107.292">FHIR Store</text></g><g class="participant participant-tail" data-participant="Store"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88.1973" x="198.1074" y="898.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.1973" x="205.1074" y="918.4404">FHIR Store</text></g><g class="participant participant-head" data-participant="Bridge"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.165" x="432.0571" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.165" x="439.0571" y="107.292">Matrix Bridge</text></g><g class="participant participant-tail" data-participant="Bridge"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.165" x="432.0571" y="898.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.165" x="439.0571" y="918.4404">Matrix Bridge</text></g><g class="participant participant-head" data-participant="HS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.1895" x="704.2461" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1895" x="711.2461" y="107.292">Matrix Homeserver</text></g><g class="participant participant-tail" data-participant="HS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.1895" x="704.2461" y="898.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1895" x="711.2461" y="918.4404">Matrix Homeserver</text></g><g class="participant participant-head" data-participant="Space"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="105.1914" x="866.4355" y="83.2969"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="105.1914" x="862.4355" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.1914" x="869.4355" y="107.292">Matrix Space</text></g><g class="participant participant-tail" data-participant="Space"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="105.1914" x="866.4355" y="898.4453"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="105.1914" x="862.4355" y="902.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.1914" x="869.4355" y="922.4404">Matrix Space</text></g><g class="participant participant-head" data-participant="Room"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="174.1182" x="985.627" y="83.2969"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="174.1182" x="981.627" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1182" x="988.627" y="107.292">Matrix Room / Channel</text></g><g class="participant participant-tail" data-participant="Room"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="174.1182" x="985.627" y="898.4453"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="174.1182" x="981.627" y="902.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1182" x="988.627" y="922.4404">Matrix Room / Channel</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1164.7451" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="352.749" x="405.998" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="334.2231" x="411.998" y="154.6606">Flow 1: New CareTeam &#8594; create Matrix Space</text><g class="message" data-participant-1="Client" data-participant-2="Store"><polygon fill="#181818" points="230.2061,188.8594,240.2061,192.8594,230.2061,196.8594,234.2061,192.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="236.2061" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.3521" x="30.9551" y="187.7935">POST CareTeam</text></g><g class="message" data-participant-1="Store" data-participant-2="Client"><polygon fill="#181818" points="34.9551,217.9922,24.9551,221.9922,34.9551,225.9922,30.9551,221.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="28.9551" x2="241.2061" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="40.9551" y="216.9263">201 Created</text></g><g class="message" data-participant-1="Store" data-participant-2="Bridge"><polygon fill="#181818" points="474.1396,262.2578,484.1396,266.2578,474.1396,270.2578,478.1396,266.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="242.2061" x2="480.1396" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.9321" x="249.2061" y="246.0591">Subscription event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.0347" x="249.2061" y="261.1919">(CareTeam created)</text></g><g class="message" data-participant-1="Bridge" data-participant-2="HS"><polygon fill="#181818" points="766.3408,306.5234,776.3408,310.5234,766.3408,314.5234,770.3408,310.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="772.3408" y1="310.5234" y2="310.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.4092" x="493.1396" y="290.3247">Create Space(name = CareTeam.id,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.856" x="493.1396" y="305.4575">metadata = patient context)</text></g><g class="message" data-participant-1="HS" data-participant-2="Bridge"><polygon fill="#181818" points="497.1396,335.6563,487.1396,339.6563,497.1396,343.6563,493.1396,339.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="491.1396" x2="777.3408" y1="339.6563" y2="339.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.46" x="503.1396" y="334.5903">SpaceID</text></g><g class="message" data-participant-1="Bridge" data-participant-2="Space"><polygon fill="#181818" points="905.0313,379.9219,915.0313,383.9219,905.0313,387.9219,909.0313,383.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="911.0313" y1="383.9219" y2="383.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.1563" x="493.1396" y="363.7231">Invite team members</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.269" x="493.1396" y="378.856">&amp; set power levels</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1164.7451" x="0" y="412.4883"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="412.4883" y2="412.4883"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="415.4883" y2="415.4883"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="400.2549" x="382.2451" y="401.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="381.729" x="388.2451" y="417.9888">Flow 2: New CommunicationRequest &#8594; new Channel</text><g class="message" data-participant-1="Client" data-participant-2="Store"><polygon fill="#181818" points="230.2061,452.1875,240.2061,456.1875,230.2061,460.1875,234.2061,456.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="236.2061" y1="456.1875" y2="456.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.251" x="30.9551" y="451.1216">POST CommunicationRequest</text></g><g class="message" data-participant-1="Store" data-participant-2="Client"><polygon fill="#181818" points="34.9551,481.3203,24.9551,485.3203,34.9551,489.3203,30.9551,485.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="28.9551" x2="241.2061" y1="485.3203" y2="485.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="40.9551" y="480.2544">201 Created</text></g><g class="message" data-participant-1="Store" data-participant-2="Bridge"><polygon fill="#181818" points="474.1396,525.5859,484.1396,529.5859,474.1396,533.5859,478.1396,529.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="242.2061" x2="480.1396" y1="529.5859" y2="529.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.9321" x="249.2061" y="509.3872">Subscription event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.9336" x="249.2061" y="524.52">(CommunicationRequest created)</text></g><g class="message" data-participant-1="Bridge" data-participant-2="HS"><polygon fill="#181818" points="766.3408,569.8516,776.3408,573.8516,766.3408,577.8516,770.3408,573.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="772.3408" y1="573.8516" y2="573.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.936" x="493.1396" y="553.6528">Create Room(parent = SpaceID,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268.2012" x="493.1396" y="568.7856">name = CommunicationRequest.subject)</text></g><g class="message" data-participant-1="HS" data-participant-2="Bridge"><polygon fill="#181818" points="497.1396,598.9844,487.1396,602.9844,497.1396,606.9844,493.1396,602.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="491.1396" x2="777.3408" y1="602.9844" y2="602.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51.4478" x="503.1396" y="597.9185">RoomID</text></g><g class="message" data-participant-1="Bridge" data-participant-2="Space"><polygon fill="#181818" points="905.0313,628.1172,915.0313,632.1172,905.0313,636.1172,909.0313,632.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="911.0313" y1="632.1172" y2="632.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.4131" x="493.1396" y="627.0513">Link Room to Space (space-child event)</text></g><g class="message" data-participant-1="Bridge" data-participant-2="Room"><polygon fill="#181818" points="1058.686,672.3828,1068.686,676.3828,1058.686,680.3828,1062.686,676.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="1064.686" y1="676.3828" y2="676.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.4795" x="493.1396" y="656.1841">Configure room metadata</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.8848" x="493.1396" y="671.3169">(tag = "Clinical-Thread")</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1164.7451" x="0" y="704.9492"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="704.9492" y2="704.9492"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1164.7451" y1="707.9492" y2="707.9492"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="347.3472" x="408.699" y="694.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="328.8213" x="414.699" y="710.4497">Flow 3: New Communication &#8594; chat message</text><g class="message" data-participant-1="Client" data-participant-2="Store"><polygon fill="#181818" points="230.2061,744.6484,240.2061,748.6484,230.2061,752.6484,234.2061,748.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="236.2061" y1="748.6484" y2="748.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.8608" x="30.9551" y="743.5825">POST Communication</text></g><g class="message" data-participant-1="Store" data-participant-2="Client"><polygon fill="#181818" points="34.9551,773.7813,24.9551,777.7813,34.9551,781.7813,30.9551,777.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="28.9551" x2="241.2061" y1="777.7813" y2="777.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.6787" x="40.9551" y="772.7153">201 Created</text></g><g class="message" data-participant-1="Store" data-participant-2="Bridge"><polygon fill="#181818" points="474.1396,818.0469,484.1396,822.0469,474.1396,826.0469,478.1396,822.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="242.2061" x2="480.1396" y1="822.0469" y2="822.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.9321" x="249.2061" y="801.8481">Subscription event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.5435" x="249.2061" y="816.981">(Communication created)</text></g><g class="message" data-participant-1="Bridge" data-participant-2="Room"><polygon fill="#181818" points="1058.686,877.4453,1068.686,881.4453,1058.686,885.4453,1062.686,881.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.1396" x2="1064.686" y1="881.4453" y2="881.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.2676" x="493.1396" y="846.1138">m.room.message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.8037" x="493.1396" y="861.2466">(body = Communication.payload,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.4229" x="493.1396" y="876.3794">relates_to = CommunicationRequest)</text></g><!--SRC=[jLFBRjim4BphAnOw53PGgKrw4w0SwYAmWRvWEJS31KrjPROKgPAKdVn0Fw2Vs2_fKg8KAn2A75fV32ndPsTdLauuYN2xtcpXzyzVy84v8-xXhH5bXI2Kmyem9xIA8iQTDj3zLbAWSW3CGdndqSHHmumJN3ICoWNX4FhNZhWhJ35XG8UPp9p2raK_y0AsrZNIo9EVohMKoBqy2qN3E4wXNMcAscfTFo7iIgzWTMHAeOoZAC_XLkepN6Nm4S-mOWPtoEhE7swGEOJB0P3dKJ0akHcMp-3pfs8tzaQXd12YnsPm_VeALXrTEJxV3CPaKBG7ourel6x04xNirMBKqkiebr70KsVmAWkalRY5OZKf78MaedovLpKwLZB7wA6XTBrqhYdhUxUC0aqoQibwfisxYrd1x0mswYHeblEQQgmFQEnUlG2B3XfzHWEIf4lxQEfrC5NNTQi4xsvhYpzQjAupMFd7Feg_6ZlJ_yzCdjFs3CFz8IteUhtWV32Dt1uYcA5DRNluHhSvQxldctVzlL3V-xjrEbGNrlyb_2XasMzoAJMSFKdLwgkeMlB1-D9m2BIrOnM9ZCauhr4ckoDjLSRBn-ZUp4JNVnH7veZAMbRXiqFxBsdDnJJkNgT-vpG8fTQ3BX-U1fCsx45gvhyIWvAux1VoU3wzvHy0]--></g></svg>